<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–î–ª—è –õ–∏–Ω—ã üíï</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:linear-gradient(135deg,#ff9ecb,#ff5e9c);
    font-family:'Segoe UI',sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    height:100vh;
    color:white;
    animation: bgShift 10s ease-in-out infinite alternate;
}
@keyframes bgShift{
    0%{background:linear-gradient(135deg,#ff9ecb,#ff5e9c);}
    50%{background:linear-gradient(135deg,#ff5e9c,#ff9ecb);}
    100%{background:linear-gradient(135deg,#ff9ecb,#ff5e9c);}
}
canvas{
    position:fixed;
    top:0;
    left:0;
    z-index:0;
}
.big-heart{
    font-size:120px;
    cursor:pointer;
    user-select:none;
    z-index:1;
    transition:0.3s;
    animation:pulse 1.5s infinite;
}
@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.05);}
    100%{transform:scale(1);}
}
.card{
    z-index:1;
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(10px);
    padding:25px;
    border-radius:20px;
    margin-top:15px;
    text-align:center;
    transition:0.5s;
}
.final-text{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:60px;
    font-weight:bold;
    color:white;
    text-align:center;
    opacity:0;
    z-index:2;
    pointer-events:none;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="bigHeart" class="big-heart" onclick="growHeart()">‚ù§</div>

<div class="card">
    <h1>–õ–∏–Ω–∞ üíñ</h1>
    <p>–¢—ã–∫–∞–π –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æüíï</p>
</div>

<div id="finalText" class="final-text">–õ–∏–Ω–∞, –±—É–¥—å –º–æ–µ–π –Ω–∞–≤—Å–µ–≥–¥–∞! üíñ</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
let size = 120;
let isRed = false;
let texts = [];
let finalShown = false;

const textMessages = [
    "–Ø –ª—é–±–ª—é —Ç–µ–±—è, –õ–∏–Ω–∞ üíï",
    "–¢—ã –º–æ—ë —Å—á–∞—Å—Ç—å–µ üò≥",
    "–¢—ã ‚Äî –º–æ–π —Å–≤–µ—Ç üå∏",
    "–ù–∞–≤—Å–µ–≥–¥–∞ —Ç–≤–æ–π ‚ù§Ô∏è",
    "–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ üíñ",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ —Ç–≤–æ—ë üíó"
];

window.addEventListener("resize", ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

function createParticle(){
    return {
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        size: Math.random()*15+8,
        speedX: (Math.random()-0.5)*0.8,
        speedY: (Math.random()-0.5)*0.8,
        life: finalShown ? Infinity : 180,
        color: isRed ? "red" : "white",
        sparkle: Math.random()<0.3
    };
}

function createGradientParticle(){
    const colors = ["#ff9ecb","#ff5e9c","#ffb3d9","#ff66a3"];
    const color = colors[Math.floor(Math.random()*colors.length)];
    return {
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        size: Math.random()*15+8,
        speedX: (Math.random()-0.5)*1,
        speedY: (Math.random()-0.5)*1,
        life: finalShown ? Infinity : 180,
        color: color,
        sparkle: Math.random()<0.3
    };
}

function createFallingHeart(x,y){
    return {
        x: x,
        y: y,
        size: Math.random()*15+5,
        speedX: (Math.random()-0.5)*1,
        speedY: Math.random()*2 + 1,
        life: 180,
        color: "red",
        sparkle: true
    };
}

function drawHeart(x,y,size,color,sparkle){
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.bezierCurveTo(x, y-size/2, x-size, y-size/2, x-size, y);
    ctx.bezierCurveTo(x-size, y+size/2, x, y+size, x, y+size);
    ctx.bezierCurveTo(x, y+size, x+size, y+size/2, x+size, y);
    ctx.bezierCurveTo(x+size, y-size/2, x, y-size/2, x, y);
    ctx.fill();
    if(sparkle){
        ctx.fillStyle="white";
        ctx.fillRect(x+Math.random()*10-5,y+Math.random()*10-5,2,2);
    }
}

function growHeart(){
    size += 15;
    const heart = document.getElementById("bigHeart");
    heart.style.fontSize = size + "px";

    if(size > 300 && !isRed){
        heart.innerHTML = "‚ù§Ô∏è";
        isRed = true;
    }

    if(size > 500 && !finalShown){
        showFinal();
    }

    for(let i=0;i<15;i++) particles.push(createParticle());
    for(let i=0;i<5;i++) particles.push(createGradientParticle());

    const rect = heart.getBoundingClientRect();
    for(let i=0;i<8;i++) particles.push(createFallingHeart(rect.left + rect.width/2, rect.top + rect.height/2));

    for(let i=0;i<2;i++) texts.push(createText());
}

function showFinal(){
    finalShown = true;
    document.getElementById("finalText").style.opacity = 1;

    for(let i=0;i<100;i++){
        particles.push({
            x: Math.random()*canvas.width,
            y: Math.random()*canvas.height,
            size: Math.random()*25+10,
            speedX: (Math.random()-0.5)*1,
            speedY: (Math.random()-0.5)*1,
            life: Infinity,
            color: "red",
            sparkle: true
        });
    }

    const heart = document.getElementById("bigHeart");
    let interval = setInterval(()=>{
        size += 10;
        heart.style.fontSize = size + "px";
        if(size > window.innerHeight*0.9) clearInterval(interval);
    },50);

    // —Å–æ–∑–¥–∞—ë–º 3—Ö6 —Ç–µ–∫—Å—Ç–æ–≤ —Å –æ—Ç—Å–∫–æ–∫–æ–º –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é
    for(let r=0;r<3;r++){
        for(let i=0;i<textMessages.length;i++){
            texts.push({
                text: textMessages[i],
                x: Math.random()*(canvas.width-100)+50,
                y: Math.random()*(canvas.height-50)+25,
                vx: (Math.random()-0.5)*2,
                vy: (Math.random()-0.5)*2,
                opacity:1,
                life: Infinity
            });
        }
    }
}

function createText(){
    const message = textMessages[Math.floor(Math.random()*textMessages.length)];
    return {
        text: message,
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        vx: 0,
        vy: 0,
        opacity:1,
        life: 180
    };
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // —á–∞—Å—Ç–∏—Ü—ã
    for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.x += p.speedX;
        p.y += p.speedY;
        if(p.life !== Infinity) p.life--;
        drawHeart(p.x,p.y,p.size,p.color,p.sparkle);
        if(p.life <= 0 && p.life !== Infinity) particles.splice(i,1);
    }

    // —Ç–µ–∫—Å—Ç —Å –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ–º
    for(let i=0;i<texts.length;i++){
        const t = texts[i];
        t.x += t.vx;
        t.y += t.vy;

        if(t.x < 0 || t.x > canvas.width-50) t.vx*=-1;
        if(t.y < 0 || t.y > canvas.height-20) t.vy*=-1;

        for(let j=i+1;j<texts.length;j++){
            const o = texts[j];
            const dx = t.x - o.x;
            const dy = t.y - o.y;
            const dist = Math.sqrt(dx*dx + dy*dy);
            const minDist = 80;
            if(dist < minDist){
                const angle = Math.atan2(dy, dx);
                const overlap = 0.5*(minDist - dist);
                t.x += Math.cos(angle)*overlap;
                t.y += Math.sin(angle)*overlap;
                o.x -= Math.cos(angle)*overlap;
                o.y -= Math.sin(angle)*overlap;

                const vxTemp = t.vx;
                const vyTemp = t.vy;
                t.vx = o.vx;
                t.vy = o.vy;
                o.vx = vxTemp;
                o.vy = vyTemp;
            }
        }

        ctx.fillStyle="white";
        ctx.font="20px 'Segoe UI'";
        ctx.fillText(t.text,t.x,t.y);
    }

    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
